Week 3-4 development plan

Phase: core backend completion. Duration: two weeks starting October 9, 2025. The focus is on finishing payment processing, real-time messaging, secure file handling, API validation, background processing, automated testing, WebSocket hardening, and migrating authentication to httpOnly cookies. Work is structured into six sequential phases so the team can track progress and de-risk sensitive areas first.

Phase one (days one and two) centres on security enhancements. Tasks include updating the authentication routes and middleware so tokens are delivered only via httpOnly cookies, adjusting the frontend clients to rely on cookies rather than localStorage, layering in CSRF protection, and validating the new behaviour. WebSocket security improvements run in parallel: move authentication from URL parameters to handshake headers, introduce rate limiting and connection monitoring, and test disconnect handling.

Phase two (days three to five) tackles payment processing. The team will build the Paystack integration end to end by creating dedicated services (services/paystack.ts, services/payment.ts), wiring the payments and bookings routes, and validating workflows such as payment initiation, verification, callbacks, refunds, insurance payments, and error handling. Webhook handlers will verify Paystack signatures and persist success, failure, and refund events with robust logging.

Phase three (days six to eight) delivers the real-time messaging experience. Messages require encryption, validation, reliable delivery, read receipts, typing indicators, attachment handling, and history retrieval. Implementation touches the messaging routes and WebSocket service. In parallel, the file upload subsystem will be finished by configuring Multer, enforcing type and size limits, optionally scanning for malware, storing files securely, generating URLs, and adding deletion paths in the messaging and visit routes.

Phase four (days nine and ten) polishes visit and booking flows. Work includes comprehensive validation, status transitions, GPS tracking, nurse report capture, doctor review endpoints, cancellation logic, and regression tests across the visits module. Phase five (days eleven and twelve) formalises background processing with BullMQ queues, PDF generation, email notifications, optional SMS notifications, job scheduling, monitoring, and full test coverage across the queue service and worker processes (PDF and email workers plus a PDF generation utility).

Phase six (days thirteen and fourteen) consolidates quality through automated testing and documentation. The team will finalise Jest configuration, write unit and integration suites (covering encryption, authentication, payments, and route behaviour), add coverage reporting, and document procedures. API documentation will follow immediately: endpoint descriptions, request and response examples, authentication notes, error catalogues, and a Postman collection committed under docs.

Progress tracking remains simple: week three covers security, payments, and real-time messaging; week four covers file uploads, visits, background processing, and documentation/testing. Success criteria demand payment processing, messaging, file uploads, complete validation, httpOnly cookies, and test coverage above fifty percent (P0). Stretch goals include WebSocket security refinements, background processing, notifications, API documentation, and coverage above seventy percent (P1), with optional SMS, PDFs, push notifications, analytics, and coverage above eighty percent (P2).

Identified risks include Paystack complexity, messaging performance, file upload security, and schedule pressure. Mitigations revolve around sandbox testing, queueing, pooling, strict validation, encryption, prioritising must-have features, and deferring lower-priority work where necessary. The plan lists all outstanding dependencies and confirms the technology stack (Express, TypeScript, Prisma, PostgreSQL, Redis, WebSocket, JWT, Joi) already supports the effort. Learning resources for Paystack, WebSocket security, file uploads, and testing are curated, and key metrics highlight target response times, latency, throughput, coverage, and reliability expectations.

In short, the two-week sprint locks down security, payments, messaging, files, background jobs, tests, and documentation so the platform exits week four with enterprise-grade backend foundations. Plan authored by Mpho Thwala on behalf of Ahava on 88 Company.
